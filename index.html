<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#0d0620">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Ramzan 2026">
<meta name="description" content="Ramzan 2026 prayer times â€“ Hanafi">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ™</text></svg>">
<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><rect width='180' height='180' rx='40' fill='%230d0620'/><text x='90' y='130' font-size='100' text-anchor='middle'>ğŸŒ™</text></svg>">
<title>Ramzan 2026</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Lora:ital,wght@0,400;0,600;1,400&family=Noto+Nastaliq+Urdu:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root {
    --deep:#0d0620; --gold:#c9a84c; --gold-light:#f0d080;
    --gold-pale:#f5e8b0; --text:#e8dfc8; --dim:#9d8f70;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    background:var(--deep);color:var(--text);
    font-family:'Lora',Georgia,serif;min-height:100vh;overflow-x:hidden;
    padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom);
  }
  body::before{
    content:'';position:fixed;inset:0;
    background:radial-gradient(ellipse 80% 50% at 50% 0%,#2a0d5e 0%,transparent 60%),
               radial-gradient(ellipse 60% 40% at 30% 100%,#0a1a3d 0%,transparent 50%),
               var(--deep);
    z-index:0;pointer-events:none;
  }
  .stars{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden}
  .star{position:absolute;background:white;border-radius:50%;animation:twinkle var(--dur,3s) ease-in-out infinite alternate;animation-delay:var(--delay,0s)}
  @keyframes twinkle{from{opacity:.1;transform:scale(.8)}to{opacity:.9;transform:scale(1.2)}}
  .moon-svg{position:fixed;top:-20px;right:20px;width:110px;height:110px;z-index:1;animation:moonGlow 4s ease-in-out infinite alternate}
  @keyframes moonGlow{from{filter:drop-shadow(0 0 15px rgba(201,168,76,.4))}to{filter:drop-shadow(0 0 35px rgba(201,168,76,.8))}}
  .container{position:relative;z-index:2;max-width:480px;margin:0 auto;padding:16px 14px 100px}

  /* LOCATION SCREEN */
  .location-screen{
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    min-height:80vh;text-align:center;padding:20px;animation:fadeUp .6s ease both;
  }
  .location-icon{font-size:64px;margin-bottom:24px;animation:pulse 2s ease-in-out infinite}
  @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}
  .location-title{font-family:'Cinzel Decorative',serif;font-size:clamp(14px,4vw,18px);color:var(--gold);letter-spacing:.15em;margin-bottom:12px}
  .location-subtitle{font-size:13px;color:var(--dim);line-height:1.7;margin-bottom:28px;max-width:320px}
  .location-btn{
    background:linear-gradient(135deg,#c9a84c,#8b6820);color:var(--deep);
    border:none;border-radius:14px;padding:16px 32px;
    font-family:'Cinzel Decorative',serif;font-size:clamp(10px,3vw,12px);
    letter-spacing:.15em;cursor:pointer;font-weight:700;transition:all .3s;
    margin-bottom:12px;width:100%;max-width:300px;
  }
  .location-btn:active{transform:scale(.97)}
  .location-btn:hover{background:linear-gradient(135deg,#f0d080,#c9a84c)}
  .location-skip{font-size:11px;color:var(--dim);cursor:pointer;text-decoration:underline;opacity:.7}
  .location-skip:hover{opacity:1}
  .location-status{font-size:12px;color:var(--dim);margin-top:14px;font-style:italic;min-height:20px}
  .location-error{color:#ff8888}

  /* MAIN CONTENT */
  .main-content{display:none}
  @keyframes fadeDown{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}
  @keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

  /* Header */
  .header{text-align:center;padding:55px 0 20px;animation:fadeDown .8s ease both}
  .arabic-title{font-family:'Noto Nastaliq Urdu',serif;font-size:clamp(26px,8vw,40px);color:var(--gold);line-height:1.4;text-shadow:0 0 30px rgba(201,168,76,.6);margin-bottom:6px}
  .en-title{font-family:'Cinzel Decorative',serif;font-size:clamp(10px,3vw,13px);letter-spacing:.3em;color:var(--gold-pale);opacity:.85}
  .divider{display:flex;align-items:center;gap:10px;margin:14px auto;max-width:260px}
  .divider-line{flex:1;height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent)}
  .divider-gem{color:var(--gold);font-size:14px}
  .location-tag{
    display:inline-flex;align-items:center;gap:6px;
    background:rgba(201,168,76,.1);border:1px solid rgba(201,168,76,.25);
    border-radius:20px;padding:5px 14px;font-size:10px;color:var(--dim);
    letter-spacing:.08em;cursor:pointer;transition:all .3s;margin-top:4px;
  }
  .location-tag:hover{background:rgba(201,168,76,.18);color:var(--gold)}

  /* Day card */
  .day-card{
    background:linear-gradient(135deg,rgba(201,168,76,.12) 0%,rgba(201,168,76,.04) 100%);
    border:1px solid rgba(201,168,76,.3);border-radius:20px;padding:22px 18px;
    text-align:center;margin-bottom:14px;backdrop-filter:blur(10px);
    animation:fadeUp .6s ease .1s both;position:relative;overflow:hidden;
  }
  .day-card::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:conic-gradient(from 0deg at 50% 50%,transparent 0deg,rgba(201,168,76,.03) 60deg,transparent 120deg);animation:rotate 20s linear infinite}
  @keyframes rotate{to{transform:rotate(360deg)}}
  .ramzan-day-label{font-family:'Cinzel Decorative',serif;font-size:9px;letter-spacing:.25em;color:var(--dim);margin-bottom:4px}
  .ramzan-day-num{font-family:'Cinzel Decorative',serif;font-size:clamp(44px,13vw,68px);font-weight:700;color:var(--gold);line-height:1;text-shadow:0 0 40px rgba(201,168,76,.5)}
  .ramzan-day-ordinal{font-size:clamp(18px,5vw,26px);vertical-align:super;color:var(--gold-light)}
  .ramzan-day-text{font-size:clamp(13px,3.8vw,17px);color:var(--gold-pale);margin-top:4px;font-style:italic}
  .gregorian-date{font-size:11px;color:var(--dim);margin-top:6px}
  .ashra-badge{display:inline-block;border-radius:30px;padding:7px 18px;font-family:'Cinzel Decorative',serif;font-size:9px;letter-spacing:.15em;text-transform:uppercase;margin-top:12px;background:linear-gradient(135deg,rgba(14,158,143,.2),rgba(14,158,143,.1));border:1px solid rgba(14,158,143,.5);color:#5fd9cc}
  .ashra-meaning{display:block;font-family:'Lora',serif;font-size:10px;color:#4ab8af;margin-top:3px;font-style:italic}

  /* Sehri/Iftar */
  .times-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:14px;animation:fadeUp .6s ease .2s both}
  .time-card{border-radius:18px;padding:18px 14px;text-align:center;backdrop-filter:blur(8px);transition:transform .2s}
  .time-card:active{transform:scale(.97)}
  .time-card.sehri{border:1px solid rgba(100,160,255,.3);background:linear-gradient(135deg,rgba(60,100,200,.12),rgba(60,100,200,.04))}
  .time-card.iftar{border:1px solid rgba(255,120,50,.3);background:linear-gradient(135deg,rgba(200,80,30,.12),rgba(200,80,30,.04))}
  .time-card-icon{font-size:26px;margin-bottom:6px;display:block}
  .time-card-label{font-family:'Cinzel Decorative',serif;font-size:9px;letter-spacing:.2em;text-transform:uppercase;color:var(--dim);margin-bottom:6px;display:block}
  .time-value{font-family:'Lora',serif;font-size:clamp(20px,6vw,28px);font-weight:600;line-height:1}
  .sehri .time-value{color:#8ab4f8}.iftar .time-value{color:#ffb066}
  .time-ampm{font-size:11px;opacity:.7;margin-left:2px}
  .time-sublabel{font-size:10px;color:var(--dim);margin-top:5px;display:block;font-style:italic}

  /* Countdown */
  .countdown-card{background:rgba(255,255,255,.03);border:1px solid rgba(201,168,76,.2);border-radius:16px;padding:14px 18px;text-align:center;margin-bottom:14px;animation:fadeUp .6s ease .3s both}
  .countdown-label{font-family:'Cinzel Decorative',serif;font-size:9px;letter-spacing:.2em;text-transform:uppercase;color:var(--dim);margin-bottom:8px;display:block}
  .countdown-time{font-family:'Cinzel Decorative',serif;font-size:clamp(26px,7.5vw,38px);font-weight:700;letter-spacing:.05em}
  .countdown-time.sehri-mode{color:#8ab4f8}.countdown-time.iftar-mode{color:#ffb066}.countdown-time.past-mode{color:var(--dim)}
  .fast-progress{background:rgba(255,255,255,.07);border-radius:100px;height:7px;margin:10px 0 4px;overflow:hidden}
  .fast-progress-fill{height:100%;border-radius:100px;background:linear-gradient(90deg,#8ab4f8,#ffb066);transition:width 1s linear}
  .fast-progress-labels{display:flex;justify-content:space-between;font-size:10px;color:var(--dim);font-style:italic}
  .countdown-sublabel{font-size:10px;color:var(--dim);margin-top:6px;font-style:italic}

  /* Prayer times */
  .prayer-section{margin-bottom:14px;animation:fadeUp .6s ease .35s both}
  .section-title{font-family:'Cinzel Decorative',serif;font-size:clamp(9px,2.5vw,11px);letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:10px;display:flex;align-items:center;gap:8px}
  .section-title::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,rgba(201,168,76,.3),transparent)}
  .prayers-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
  .prayer-pill{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:12px 8px;text-align:center;transition:all .3s;position:relative;overflow:hidden}
  .prayer-pill.active-prayer{background:linear-gradient(135deg,rgba(201,168,76,.2),rgba(201,168,76,.07));border-color:rgba(201,168,76,.5);box-shadow:0 0 16px rgba(201,168,76,.2)}
  .prayer-pill.active-prayer::before{content:'NOW';position:absolute;top:4px;right:4px;background:var(--gold);color:var(--deep);font-family:'Cinzel Decorative',serif;font-size:6px;padding:2px 5px;border-radius:6px;letter-spacing:.1em}
  .prayer-pill-icon{font-size:18px;display:block;margin-bottom:4px}
  .prayer-pill-name{font-family:'Cinzel Decorative',serif;font-size:clamp(7px,2vw,9px);letter-spacing:.1em;color:var(--dim);display:block;margin-bottom:3px}
  .prayer-pill-arabic{font-family:'Noto Nastaliq Urdu',serif;font-size:12px;color:var(--gold);display:block;margin-bottom:4px}
  .prayer-pill-time{font-family:'Lora',serif;font-size:clamp(13px,3.8vw,16px);font-weight:600;color:var(--text);display:block}
  .prayer-pill-ampm{font-size:9px;color:var(--dim);margin-left:1px}

  /* Laylatul Qadr */
  .qadr-card{background:linear-gradient(135deg,rgba(201,168,76,.1) 0%,rgba(80,30,120,.15) 100%);border:1px solid rgba(201,168,76,.35);border-radius:18px;padding:18px;margin-bottom:14px;animation:fadeUp .6s ease .45s both}
  .qadr-header{display:flex;align-items:center;gap:10px;margin-bottom:12px}
  .qadr-icon{font-size:26px;animation:qadrPulse 2s ease-in-out infinite}
  @keyframes qadrPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}
  .qadr-title{font-family:'Cinzel Decorative',serif;font-size:clamp(10px,2.8vw,12px);color:var(--gold);letter-spacing:.1em}
  .qadr-subtitle{font-size:10px;color:var(--dim);font-style:italic;margin-top:2px}
  .qadr-nights{display:flex;flex-wrap:wrap;gap:7px}
  .qadr-night{flex:1;min-width:58px;text-align:center;padding:10px 6px;border-radius:12px;background:rgba(255,255,255,.04);border:1px solid rgba(201,168,76,.2);position:relative}
  .qadr-night.highlighted{background:rgba(201,168,76,.15);border-color:rgba(201,168,76,.5);color:var(--gold-pale)}
  .qadr-night.past{opacity:.35}
  .qadr-night.tonight{background:linear-gradient(135deg,rgba(201,168,76,.3),rgba(160,80,200,.2));border-color:var(--gold);animation:glowNight 2s ease-in-out infinite alternate}
  @keyframes glowNight{from{box-shadow:0 0 10px rgba(201,168,76,.3)}to{box-shadow:0 0 25px rgba(201,168,76,.7)}}
  .qadr-night-label{font-family:'Cinzel Decorative',serif;font-size:7px;letter-spacing:.1em;display:block;color:var(--dim);margin-bottom:3px}
  .qadr-night-num{font-size:clamp(15px,4vw,19px);font-weight:600;color:var(--gold)}
  .qadr-night-date{font-size:8px;color:var(--dim);display:block;margin-top:2px}
  .tonight-badge{position:absolute;top:-8px;left:50%;transform:translateX(-50%);background:var(--gold);color:var(--deep);font-size:7px;font-family:'Cinzel Decorative',serif;padding:2px 7px;border-radius:10px;white-space:nowrap}

  /* Info */
  .info-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:14px;animation:fadeUp .6s ease .5s both}
  .info-card{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px 12px;text-align:center}
  .info-card-icon{font-size:22px;display:block;margin-bottom:5px}
  .info-card-label{font-family:'Cinzel Decorative',serif;font-size:8px;letter-spacing:.15em;text-transform:uppercase;color:var(--dim);display:block;margin-bottom:4px}
  .info-card-value{font-size:clamp(13px,3.8vw,16px);font-weight:600;color:var(--text)}

  /* Notifications */
  .notif-card{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:18px;margin-bottom:14px;animation:fadeUp .6s ease .55s both}
  .notif-title{font-family:'Cinzel Decorative',serif;font-size:clamp(9px,2.5vw,11px);letter-spacing:.2em;color:var(--gold);text-transform:uppercase;margin-bottom:10px;display:flex;align-items:center;gap:8px}
  .notif-btn{width:100%;background:linear-gradient(135deg,#c9a84c,#8b6820);color:var(--deep);border:none;border-radius:11px;padding:13px;font-family:'Cinzel Decorative',serif;font-size:clamp(9px,2.8vw,11px);letter-spacing:.15em;cursor:pointer;transition:all .3s;font-weight:700}
  .notif-btn:active{transform:scale(.97)}
  .notif-btn.enabled{background:linear-gradient(135deg,#0e9e8f,#065e56);color:white}
  .notif-status{font-size:10px;color:var(--dim);text-align:center;margin-top:8px;font-style:italic}

  /* Dua */
  .dua-card{background:linear-gradient(135deg,rgba(201,168,76,.08) 0%,rgba(14,158,143,.05) 100%);border:1px solid rgba(201,168,76,.2);border-radius:16px;padding:18px;text-align:center;margin-bottom:14px;animation:fadeUp .6s ease .6s both}
  .dua-label{font-family:'Cinzel Decorative',serif;font-size:8px;letter-spacing:.2em;color:var(--dim);text-transform:uppercase;margin-bottom:10px;display:block}
  .dua-arabic{font-family:'Noto Nastaliq Urdu',serif;font-size:clamp(14px,4vw,18px);color:var(--gold-pale);line-height:2;margin-bottom:6px}
  .dua-translation{font-size:10px;color:var(--dim);font-style:italic;line-height:1.6}

  /* Loader */
  .loader{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:36px;gap:14px}
  .loader-ring{width:44px;height:44px;border:3px solid rgba(201,168,76,.2);border-top-color:var(--gold);border-radius:50%;animation:spin 1s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}
  .loader-text{font-family:'Cinzel Decorative',serif;font-size:10px;letter-spacing:.2em;color:var(--dim)}

  .footer{text-align:center;padding:14px;font-size:10px;color:var(--dim);letter-spacing:.08em;animation:fadeUp .6s ease .65s both}
  .hidden{display:none}

  @media(max-width:340px){
    .prayers-grid{grid-template-columns:repeat(2,1fr)}
    .times-grid,.info-grid{grid-template-columns:1fr}
  }
</style>
</head>
<body>

<div class="stars" id="starsContainer"></div>

<svg class="moon-svg" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
  <defs><filter id="glow"><feGaussianBlur stdDeviation="4" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs>
  <circle cx="60" cy="60" r="45" fill="#f5e8b0" filter="url(#glow)" opacity="0.9"/>
  <circle cx="82" cy="48" r="38" fill="#0d0620"/>
  <circle cx="52" cy="72" r="2.5" fill="rgba(201,168,76,0.5)"/>
  <circle cx="70" cy="55" r="1.5" fill="rgba(201,168,76,0.3)"/>
</svg>

<div class="container">

  <!-- â•â• LOCATION SCREEN â•â• -->
  <div class="location-screen" id="locationScreen">
    <div class="location-icon">ğŸ“</div>
    <div class="location-title">Share Your Location</div>
    <div class="location-subtitle">
      To show accurate Sehri, Iftar and prayer times for <em>your city</em>,
      this app needs to know your location. Your location is never stored or shared.
    </div>
    <button class="location-btn" onclick="requestLocation()">
      ğŸŒ™ &nbsp;Allow Location Access
    </button>
    <div class="location-skip" onclick="useDefaultLahore()">Use Lahore timings instead</div>
    <div class="location-status" id="locationStatus"></div>
  </div>

  <!-- â•â• MAIN CONTENT â•â• -->
  <div class="main-content" id="mainContent">

    <!-- Header -->
    <div class="header">
      <div class="arabic-title">Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©</div>
      <div class="en-title">Ramzan Mubarak</div>
      <div class="divider">
        <div class="divider-line"></div><div class="divider-gem">âœ¦</div><div class="divider-line"></div>
      </div>
      <div class="location-tag" onclick="changeLocation()" title="Tap to change location">
        ğŸ“ <span id="cityLabel">Detectingâ€¦</span> Â· Fiqa Hanafi
      </div>
    </div>

    <!-- Day card -->
    <div class="day-card" id="dayCard">
      <div class="loader"><div class="loader-ring"></div><div class="loader-text">Fetching Timingsâ€¦</div></div>
    </div>

    <!-- Sehri / Iftar -->
    <div class="times-grid" id="timesGrid" style="display:none">
      <div class="time-card sehri">
        <span class="time-card-icon">ğŸŒ™</span>
        <span class="time-card-label">Sehri Ends</span>
        <div class="time-value" id="sehriTime">â€”</div>
        <span class="time-sublabel">Fajr Azan Â· Hanafi</span>
      </div>
      <div class="time-card iftar">
        <span class="time-card-icon">ğŸŒ…</span>
        <span class="time-card-label">Iftar Time</span>
        <div class="time-value" id="iftarTime">â€”</div>
        <span class="time-sublabel">Maghrib Azan</span>
      </div>
    </div>

    <!-- Countdown -->
    <div class="countdown-card" id="countdownCard" style="display:none">
      <span class="countdown-label" id="countdownLabel">Time Until Iftar</span>
      <div class="countdown-time" id="countdownTime">--:--:--</div>
      <div class="fast-progress"><div class="fast-progress-fill" id="fastProgress" style="width:0%"></div></div>
      <div class="fast-progress-labels">
        <span>Sehri</span><span id="fastingHours">â€”</span><span>Iftar</span>
      </div>
      <div class="countdown-sublabel" id="countdownSublabel"></div>
    </div>

    <!-- All Prayers -->
    <div class="prayer-section" id="prayerSection" style="display:none">
      <div class="section-title">ğŸ•Œ Today's Prayer Times</div>
      <div class="prayers-grid" id="prayersGrid"></div>
    </div>

    <!-- Laylatul Qadr -->
    <div class="qadr-card" id="qadrCard" style="display:none">
      <div class="qadr-header">
        <span class="qadr-icon">âœ¨</span>
        <div>
          <div class="qadr-title">Laylatul Qadr</div>
          <div class="qadr-subtitle">Probable nights â€” Last 10 odd nights</div>
        </div>
      </div>
      <div class="qadr-nights" id="qadrNights"></div>
    </div>

    <!-- Info -->
    <div class="info-grid" id="infoGrid" style="display:none">
      <div class="info-card"><span class="info-card-icon">ğŸ“…</span><span class="info-card-label">Days Remaining</span><div class="info-card-value" id="daysLeft">â€”</div></div>
      <div class="info-card"><span class="info-card-icon">â±ï¸</span><span class="info-card-label">Fasting Duration</span><div class="info-card-value" id="fastDuration">â€”</div></div>
      <div class="info-card"><span class="info-card-icon">ğŸ•Œ</span><span class="info-card-label">Taraweeh</span><div class="info-card-value">After Isha</div></div>
      <div class="info-card"><span class="info-card-icon">ğŸ“¿</span><span class="info-card-label">Eid ul-Fitr</span><div class="info-card-value">~21 Mar</div></div>
    </div>

    <!-- Notifications -->
    <div class="notif-card">
      <div class="notif-title">ğŸ”” Prayer Notifications</div>
      <button class="notif-btn" id="notifBtn" onclick="requestNotifications()">Enable Sehri &amp; Iftar Alerts</button>
      <div class="notif-status" id="notifStatus">Receive reminders 15 min before Sehri ends and at Iftar</div>
    </div>

    <!-- Duas -->
    <div class="dua-card">
      <span class="dua-label">Sehri Dua Â· Ø³Ø­Ø±ÛŒ Ú©ÛŒ Ø¯Ø¹Ø§</span>
      <div class="dua-arabic">ÙˆÙØ¨ÙØµÙÙˆÙ’Ù…Ù ØºÙØ¯Ù Ù†ÙÙ‘ÙˆÙÙŠÙ’ØªÙ Ù…ÙÙ†Ù’ Ø´ÙÙ‡Ù’Ø±Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù</div>
      <div class="dua-translation">"I intend to keep the fast for tomorrow in the month of Ramzan."</div>
    </div>
    <div class="dua-card">
      <span class="dua-label">Iftar Dua Â· Ø§ÙØ·Ø§Ø±ÛŒ Ú©ÛŒ Ø¯Ø¹Ø§</span>
      <div class="dua-arabic">Ø§ÙÙ„Ù„Ù‘Ù°Ù‡ÙÙ…ÙÙ‘ Ø§ÙÙ†ÙÙ‘Ù‰ Ù„ÙÙƒÙ ØµÙÙ…Ù’ØªÙ ÙˆÙØ¨ÙÙƒÙ Ø¢Ù…ÙÙ†Ù’ØªÙ ÙˆÙØ¹ÙÙ„ÙÙŠÙ’ÙƒÙ ØªÙÙˆÙÙƒÙÙ‘Ù„Ù’ØªÙ ÙˆÙØ¹ÙÙ„Ù°Ù‰ Ø±ÙØ²Ù’Ù‚ÙÙƒÙ Ø§ÙÙÙ’Ø·ÙØ±Ù’ØªÙ</div>
      <div class="dua-translation">"O Allah! I fasted for You, I believe in You, I trust in You, and I break my fast with Your sustenance."</div>
    </div>

    <div class="footer">
      Data via AlAdhan API Â· Fiqa Hanafi Â· Method: Karachi<br>
      <span style="margin-top:3px;display:block">Ramzan 1447 AH Â· 2026 CE</span>
    </div>

  </div><!-- /main-content -->
</div><!-- /container -->

<script>
// â”€â”€ Constants â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const RAMZAN_START = new Date(2026,1,19); // Feb 19 2026
const PRAYERS = [
  {key:'Fajr',    label:'Fajr',    arabic:'ÙØ¬Ø±',  icon:'ğŸŒ„'},
  {key:'Sunrise', label:'Sunrise', arabic:'Ø·Ù„ÙˆØ¹', icon:'â˜€ï¸'},
  {key:'Dhuhr',   label:'Dhuhr',   arabic:'Ø¸ÛØ±',  icon:'ğŸŒ'},
  {key:'Asr',     label:'Asr',     arabic:'Ø¹ØµØ±',  icon:'ğŸŒ¤ï¸'},
  {key:'Maghrib', label:'Maghrib', arabic:'Ù…ØºØ±Ø¨', icon:'ğŸŒ…'},
  {key:'Isha',    label:'Isha',    arabic:'Ø¹Ø´Ø§Ø¡', icon:'ğŸŒ™'},
];

let sehriEnd=null, iftarTime=null, allTimings=null;
let cInterval=null, notifTimers=[], notifEnabled=false;
let userLat=null, userLng=null, userCity='Your Location';

// â”€â”€ Stars â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function createStars(){
  const c=document.getElementById('starsContainer');
  for(let i=0;i<80;i++){
    const s=document.createElement('div'); s.className='star';
    const sz=Math.random()*2.5+.5;
    s.style.cssText=`width:${sz}px;height:${sz}px;top:${Math.random()*100}%;left:${Math.random()*100}%;--dur:${2+Math.random()*4}s;--delay:${Math.random()*4}s;opacity:${Math.random()*.6+.1}`;
    c.appendChild(s);
  }
})();

// â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const getRamzanDay = d=>{
  const a=new Date(d.getFullYear(),d.getMonth(),d.getDate());
  const b=new Date(RAMZAN_START.getFullYear(),RAMZAN_START.getMonth(),RAMZAN_START.getDate());
  return Math.floor((a-b)/86400000)+1;
};
const getOrdinal = n=>{ const s=['th','st','nd','rd'],v=n%100; return s[(v-20)%10]||s[v]||s[0]; };
const getAshra = d=>d<=10
  ?{name:'1st Ashra',arabic:'Ù¾ÛÙ„Ø§ Ø¹Ø´Ø±Û',meaning:'Days of Mercy â€” Ø±Ø­Ù…Øª',bdr:'rgba(95,217,204,.5)',clr:'#5fd9cc'}
  :d<=20
  ?{name:'2nd Ashra',arabic:'Ø¯ÙˆØ³Ø±Ø§ Ø¹Ø´Ø±Û',meaning:'Days of Forgiveness â€” Ù…ØºÙØ±Øª',bdr:'rgba(248,200,138,.5)',clr:'#f8c88a'}
  :{name:'3rd Ashra',arabic:'ØªÛŒØ³Ø±Ø§ Ø¹Ø´Ø±Û',meaning:'Refuge from Hellfire â€” Ù†Ø¬Ø§Øª',bdr:'rgba(255,158,181,.5)',clr:'#ff9eb5'};
const fmt12 = str=>{
  const clean=str.split(' ')[0];
  const [h,m]=clean.split(':').map(Number);
  return {time:`${h%12||12}:${String(m).padStart(2,'0')}`,ampm:h>=12?'PM':'AM'};
};
const toDate = str=>{
  const clean=str.split(' ')[0];
  const [h,m]=clean.split(':').map(Number),n=new Date();
  return new Date(n.getFullYear(),n.getMonth(),n.getDate(),h,m,0);
};
const fmtDur=ms=>{ const h=Math.floor(ms/3600000),m=Math.floor((ms%3600000)/60000); return `${h}h ${m}m`; };

// â”€â”€ Reverse geocode (get city name from coords) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function getCityName(lat,lng){
  try{
    const r=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lng}&format=json`);
    const d=await r.json();
    return d.address.city || d.address.town || d.address.village || d.address.county || 'Your Location';
  }catch{ return 'Your Location'; }
}

// â”€â”€ Location flow â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function requestLocation(){
  const status=document.getElementById('locationStatus');
  status.textContent='Detecting your locationâ€¦';
  status.className='location-status';

  if(!('geolocation' in navigator)){
    status.textContent='âš ï¸ Geolocation not supported. Using Lahore.';
    status.className='location-status location-error';
    setTimeout(useDefaultLahore, 1500);
    return;
  }

  navigator.geolocation.getCurrentPosition(
    async pos=>{
      userLat=pos.coords.latitude;
      userLng=pos.coords.longitude;
      status.textContent='ğŸ“ Location found! Loading timingsâ€¦';
      userCity=await getCityName(userLat,userLng);
      showMain();
    },
    err=>{
      console.warn('Geolocation error:', err.message);
      status.className='location-status location-error';
      if(err.code===1) status.textContent='âŒ Permission denied. Using Lahore timings.';
      else status.textContent='âš ï¸ Could not detect location. Using Lahore timings.';
      setTimeout(useDefaultLahore, 1800);
    },
    {timeout:10000, maximumAge:300000}
  );
}

function useDefaultLahore(){
  userLat=31.5497; userLng=74.3436; userCity='Lahore';
  showMain();
}

function changeLocation(){
  // Reset and show location screen again
  document.getElementById('mainContent').style.display='none';
  document.getElementById('locationScreen').style.display='flex';
  document.getElementById('locationStatus').textContent='';
  if(cInterval){ clearInterval(cInterval); cInterval=null; }
}

async function showMain(){
  document.getElementById('locationScreen').style.display='none';
  document.getElementById('mainContent').style.display='block';
  document.getElementById('cityLabel').textContent=userCity;
  await loadTimings();
}

// â”€â”€ API fetch using coordinates â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Uses /v1/timings/{date}?latitude=&longitude=&method=1&school=1
// method=1 = Karachi (University of Islamic Sciences, Pakistan)
// school=1 = Hanafi (for Asr time)
async function loadTimings(){
  const n=new Date();
  const dd=String(n.getDate()).padStart(2,'0');
  const mm=String(n.getMonth()+1).padStart(2,'0');
  const yyyy=n.getFullYear();
  const url=`https://api.aladhan.com/v1/timings/${dd}-${mm}-${yyyy}?latitude=${userLat}&longitude=${userLng}&method=1&school=1`;

  try{
    const res=await fetch(url);
    if(!res.ok) throw new Error(`HTTP ${res.status}`);
    const data=await res.json();
    if(data.code!==200) throw new Error('API error');
    allTimings=data.data.timings;
    sehriEnd  =allTimings.Fajr;
    iftarTime =allTimings.Maghrib;
    renderAll();
  }catch(e){
    console.warn('API failed:', e);
    // Fallback: accurate Lahore mid-Ramzan estimates
    allTimings={Fajr:'05:22',Sunrise:'06:45',Dhuhr:'12:26',Asr:'15:48',Maghrib:'17:56',Isha:'19:15'};
    sehriEnd='05:22'; iftarTime='17:56';
    // Show subtle inline note
    const dayCard=document.getElementById('dayCard');
    dayCard.innerHTML+='';
    renderAll(true);
  }
}

// â”€â”€ Render everything â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAll(usedFallback=false){
  const today=new Date(), day=getRamzanDay(today);

  if(day<1||day>30){
    document.getElementById('dayCard').innerHTML=`
      <div style="text-align:center;padding:20px">
        <div style="font-size:40px;margin-bottom:12px">ğŸŒ™</div>
        <div style="font-family:'Cinzel Decorative',serif;font-size:13px;color:var(--gold);margin-bottom:8px">
          ${day<1?'Ramzan Begins Feb 19, 2026':'Eid Mubarak! ğŸ‰'}
        </div>
        <div style="font-size:12px;color:var(--dim)">
          ${day<1?'May Allah accept your ibadah.':'May Allah accept all your fasts and prayers.'}
        </div>
      </div>`;
    return;
  }

  renderDayCard(day, usedFallback);

  const s=fmt12(sehriEnd), f=fmt12(iftarTime);
  document.getElementById('sehriTime').innerHTML=`${s.time}<span class="time-ampm">${s.ampm}</span>`;
  document.getElementById('iftarTime').innerHTML=`${f.time}<span class="time-ampm">${f.ampm}</span>`;
  document.getElementById('timesGrid').style.display='grid';

  const fastMs=toDate(iftarTime)-toDate(sehriEnd);
  const fh=Math.floor(fastMs/3600000),fm=Math.floor((fastMs%3600000)/60000);
  document.getElementById('fastDuration').textContent=`${fh}h ${fm}m`;
  document.getElementById('fastingHours').textContent=`${fh}h ${fm}m total`;

  document.getElementById('countdownCard').style.display='block';
  startCountdown();
  renderPrayers(allTimings);
  renderQadr(day);
  document.getElementById('daysLeft').textContent=day<30?`${30-day} days`:'Last Day!';
  document.getElementById('infoGrid').style.display='grid';

  if('Notification' in window && Notification.permission==='granted'){
    notifEnabled=true;
    document.getElementById('notifBtn').textContent='âœ… Notifications Active';
    document.getElementById('notifBtn').classList.add('enabled');
    document.getElementById('notifStatus').textContent='ğŸ”” Sehri & Iftar alerts are active.';
    scheduleAll();
  }
}

function renderDayCard(day, usedFallback){
  const a=getAshra(day),today=new Date();
  const greg=today.toLocaleDateString('en-PK',{weekday:'long',day:'numeric',month:'long',year:'numeric'});
  const fallbackNote=usedFallback?`<div style="font-size:9px;color:#ffb066;margin-top:8px;opacity:.8">âš ï¸ Estimated times â€” check local mosque for exact times</div>`:'';
  document.getElementById('dayCard').innerHTML=`
    <div class="ramzan-day-label">Ramzan Day</div>
    <div class="ramzan-day-num">${day}<span class="ramzan-day-ordinal">${getOrdinal(day)}</span></div>
    <div class="ramzan-day-text">Ramzan Mubarak</div>
    <div class="gregorian-date">${greg}</div>
    <div class="ashra-badge" style="border-color:${a.bdr};color:${a.clr}">
      ${a.name} â€” ${a.arabic}
      <span class="ashra-meaning">${a.meaning}</span>
    </div>
    ${fallbackNote}`;
}

function renderPrayers(t){
  const now=new Date(), nowM=now.getHours()*60+now.getMinutes();
  const mins=PRAYERS.map(p=>{ const raw=(t[p.key]||'').split(' ')[0]; if(!raw) return 9999; const [h,m]=raw.split(':').map(Number); return h*60+m; });
  let activeIdx=-1;
  for(let i=0;i<mins.length;i++) if(mins[i]<=nowM) activeIdx=i;
  let html='';
  PRAYERS.forEach((p,i)=>{
    const raw=(t[p.key]||'').split(' ')[0]; if(!raw) return;
    const f=fmt12(raw), isActive=i===activeIdx;
    html+=`<div class="prayer-pill ${isActive?'active-prayer':''}">
      <span class="prayer-pill-icon">${p.icon}</span>
      <span class="prayer-pill-name">${p.label}</span>
      <span class="prayer-pill-arabic">${p.arabic}</span>
      <span class="prayer-pill-time">${f.time}<span class="prayer-pill-ampm">${f.ampm}</span></span>
    </div>`;
  });
  document.getElementById('prayersGrid').innerHTML=html;
  document.getElementById('prayerSection').style.display='block';
  setTimeout(()=>renderPrayers(t), 60000);
}

function renderQadr(day){
  const nights=[21,23,25,27,29]; let html='';
  nights.forEach(n=>{
    const isPast=day>n, isTonight=day===n-1||day===n;
    const nd=new Date(RAMZAN_START); nd.setDate(RAMZAN_START.getDate()+n-2);
    const ds=nd.toLocaleDateString('en-PK',{day:'numeric',month:'short'});
    const cls=`qadr-night ${isPast?'past':''} ${isTonight?'tonight highlighted':n===27?'highlighted':''}`;
    html+=`<div class="${cls}">
      ${isTonight?'<span class="tonight-badge">Tonight!</span>':''}
      <span class="qadr-night-label">Night of</span>
      <div class="qadr-night-num">${n}</div>
      <span class="qadr-night-date">${ds}</span>
      ${n===27?'<span style="font-size:8px;color:var(--gold);display:block;margin-top:2px;">Most likely â­</span>':''}
    </div>`;
  });
  document.getElementById('qadrNights').innerHTML=html;
  document.getElementById('qadrCard').style.display='block';
}

function startCountdown(){
  if(cInterval) clearInterval(cInterval);
  const sD=toDate(sehriEnd), iD=toDate(iftarTime), dur=iD-sD;
  const tick=()=>{
    const now=new Date();
    const el=document.getElementById('countdownTime');
    const lbl=document.getElementById('countdownLabel');
    const sub=document.getElementById('countdownSublabel');
    const prg=document.getElementById('fastProgress');
    let diff,mode;
    if(now<sD){
      diff=sD-now; mode='sehri-mode';
      lbl.textContent='Sehri ends in';
      sub.textContent='âš ï¸ Finish your meal before Fajr Azan!';
      prg.style.width='2%';
    } else if(now<iD){
      diff=iD-now; mode='iftar-mode';
      lbl.textContent='Time Until Iftar';
      prg.style.width=Math.min(100,((now-sD)/dur)*100)+'%';
      sub.textContent=`${fmtDur(iD-now)} remaining Â· Stay strong! ğŸ’ª`;
    } else {
      mode='past-mode'; lbl.textContent='Iftar Time';
      sub.textContent='ğŸŒ™ Iftar done. Ramzan Mubarak!';
      prg.style.width='100%'; el.textContent='Iftar Done!';
      el.className=`countdown-time ${mode}`; return;
    }
    const h=Math.floor(diff/3600000),m=Math.floor((diff%3600000)/60000),s=Math.floor((diff%60000)/1000);
    el.textContent=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    el.className=`countdown-time ${mode}`;
  };
  tick(); cInterval=setInterval(tick,1000);
}

function schedNotif(title,body,at){
  const d=at-new Date(); if(d<0) return;
  notifTimers.push(setTimeout(()=>new Notification(title,{body,icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">ğŸŒ™</text></svg>'}),d));
}

async function requestNotifications(){
  if(!('Notification' in window)){document.getElementById('notifStatus').textContent='âŒ Not supported in this browser.';return;}
  const perm=await Notification.requestPermission();
  if(perm!=='granted'){document.getElementById('notifStatus').textContent='âŒ Permission denied.';return;}
  notifEnabled=true;
  document.getElementById('notifBtn').textContent='âœ… Notifications Enabled';
  document.getElementById('notifBtn').classList.add('enabled');
  document.getElementById('notifStatus').textContent='ğŸ”” Sehri (15 min warning) & Iftar alerts scheduled!';
  scheduleAll();
}

function scheduleAll(){
  notifTimers.forEach(clearTimeout); notifTimers=[];
  if(!sehriEnd||!iftarTime) return;
  const sD=toDate(sehriEnd), iD=toDate(iftarTime);
  schedNotif('â° Sehri Alert â€” 15 Minutes!',`Sehri ends soon in ${userCity}. Finish your meal!`,new Date(sD-15*60*1000));
  schedNotif('ğŸŒ… Iftar Time!',`Maghrib Azan in ${userCity} â€” Break your fast. Ramzan Mubarak! ğŸŒ™`,iD);
  const day=getRamzanDay(new Date());
  if([21,23,25,27,29].includes(day))
    schedNotif('âœ¨ Laylatul Qadr Tonight!',`Tonight is the ${day}th night. Increase your prayers and dhikr!`,new Date(iD.getTime()+5*60*1000));
}
</script>
</body>
</html>
